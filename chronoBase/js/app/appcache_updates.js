define(["require","jquery"],function(e){function n(){window.location.reload()}function r(e){return window.applicationCache.update(),!1}function i(e){t(".install-error").html(e)}function s(){window.applicationCache.status==window.applicationCache.UPDATEREADY&&(window.applicationCache.swapCache(),confirm("UPDATED: Reload to use the new version")?window.location.reload():i("UPGRADE INFO: new version available. reload to active."))}var t=require("jquery");t(function(){t(".upgrade-btn").click(r),t(".reload-btn").click(n)}),window.applicationCache&&(window.applicationCache.addEventListener("error",function(e){i("UPGRADE ERROR: error downloading new version. retry later.")},!0),window.applicationCache.addEventListener("checking",function(){i("UPGRADE INFO: check for updates...")},!0),window.applicationCache.addEventListener("noupdate",function(){i("UPGRADE INFO: no updates found")},!0),window.applicationCache.addEventListener("obsolete",function(){console.log("APPCACHE - obsolete",arguments)},!0),window.applicationCache.addEventListener("cached",function(){console.log("APPCACHE - cached",arguments)},!0),window.applicationCache.addEventListener("downloading",function(){i("UPGRADE INFO: start downloading updates...")},!0),window.applicationCache.addEventListener("progress",function(e){i("UPGRADE INFO: download in progress...")},!0),window.applicationCache.addEventListener("updateready",function(){s()},!0))})