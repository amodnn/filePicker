define(["require","app/force_redraw_workaround","jquery"],function(e){function l(e,r,i){var s=n(e).get(0).clientHeight*i;n(r).animate({scrollTop:s},{duration:"0.3s",easing:"swing",step:function(){t(e.get(0))}})}function c(e){var t=Math.floor(e/3600),n=e%3600,r=Math.floor(n/60),i=n%60,s=Math.ceil(i),o={val:{h:t,m:r,s:s},name:{h:t<10?"0"+t:t,m:r<10?"0"+r:r,s:s<10?"0"+s:s}};return o}var t=e("app/force_redraw_workaround").force_redraw,n=e("jquery");for(var r=0;r<60;r++){var i=r<10?"0"+r:r,s=n("<li>",{role:"option","class":i}).html(i);n("#seconds").append(s)}for(var r=0;r<60;r++){var i=r<10?"0"+r:r,s=n("<li>",{role:"option","class":i}).html(i);n("#minutes").append(s)}for(var r=0;r<100;r++){var i=r<10?"0"+r:r,s=n("<li>",{role:"option","class":i}).html(i);n("#hours").append(s)}var o=undefined,u=undefined,a=undefined,f=0;return n("#reset_lap").live("click",function(){if(typeof o=="undefined")u=undefined,f=0,l(n("#seconds > li.00"),n("#seconds"),0),l(n("#minutes > li.00"),n("#minutes"),0),l(n("#hours > li.00"),n("#hours"),0);else{var e=Math.floor(Date.now()-u),t=c((f+e)/1e3);a(t)}}),n("#start_stop").live("click",function(){typeof u=="undefined"&&(u=Date.now()),o?(n("#start_stop").html("Start"),n("#reset_lap").html("Reset"),clearInterval(o),f+=Date.now()-u,o=undefined,u=undefined):(n("#start_stop").html("Stop"),n("#reset_lap").html("Lap"),o=setInterval(function(){var e=Math.floor(Date.now()-u),t=c((f+e)/1e3);l(n("#seconds > li."+t.name.s),n("#seconds"),t.val.s),l(n("#minutes > li."+t.name.m),n("#minutes"),t.val.m),l(n("#hours > li."+t.name.h),n("#hours"),t.val.h)},500))}),{setLapHandler:function(e){a=e}}})